# 파드(Pod)
- 파드는 함께 배치된 컨테이너 그룹이고 쿠버네티스의 기본 빌딩 그룹이다. 컨테이너를 개별적으로 배포한다기 보다는 컨테이너를 가진 파드를 배포하고 운영한다. 
- 항상 파드가 두 개 이상의 컨테이너를 포함하는 것을 의미하는 것이 아니다. 일반적으로 파드는 하나의 컨테이너만 포함한다. 파드의 핵심은 파드가 여러개의 컨테이너를 가지고 있는 경우에 모든 컨테이너는 항상 하나의 워커 노드에세 실행된다. 즉 하나의 파드내에 있는 컨테이너가 여러 노드에 배치되지 않는 다는 것이다. 


## 파드가 필요한 이유 
- 파드가 왜 필요할까? 단순하게 쿠버네티스 사용하니까 쿠버네티스에서 애플리케이션을 배포하기 위해서는 파드를 감싸서 배포해야하니까 ? 

### 여러 프로세스를 실행하는 단일 컨테이너보다 다중 컨테이너가 나은 이유 
- 쿠버네티스에서는 프로세스를 항상 컨테이너에서 실행시키고 각 컨테이너는 격리된 머신과 비슷하기 때문에 여러 프로세스를 단일 컨테이너 안에서 실행하는 것이 타당할 수 있지만, 실제로 그렇지않다. 컨테이너 목적은 단일 프로세스를 실행하는 것으로 목적으로 설계되었다. 
- 단일 컨테이너에서 관련없는 프로세스를 실행하는 경우 모든 프로세스를 실행하고 로그를 관리하는 것은 모두 사용자 책임이다. 
- 따라서 각 프로세스를 자체의 개별 컨테이너로 실행해야 한다. 


## 파드 이해하기 
- 여러 프로세스를 단일 컨테이너로 묶지 않기 때문에 컨테이너를 함께 묶고 하나의 단위로 관리할 수 있는 상위 구조가 필요한 것 이게 파드가 필요한 것이다. 
- 컨테이너 모음을 사용해 밀접하게 연관된 프로세스를 함께 실행하고 단일 컨테이너 안에서 모두 실행되는 것처럼 동일한 환경을 제공할 수 있으면서도 격리된 상태를 유지할 수 있다. 
- 즉 컨테이너가 제공하는 모든 기능을 활용하는 동시에 프로세스가 함께 실행되는 것처럼 보이게 할 수 있다는 것 


## 파드 구성
- 파드는 상대적으로 가볍다. 오버헤드 없이 필요한 만큼 파드를 가질 수 있다.모든 것을 하나의 파드에 넣는 대신에 애플리케이션을 여러 파드로 구성하고 각 파드에는 밀접하게 관련있는 구성 요소나 프로세스만 포함해야한다. 
- 그러면 이렇게 생각할 수 도 있다 프론트엔드 백엔드 백엔드 데이터베이스로 구성된 다 중 계층 애플리케이션을 하나의 파드 또는 두 개의파드로 구성하는게 맞을까? 
  - 백엔드 서버와 데이터베이스를 하나의 파드로 묶는건 어렵지 않다. 근데 적절한 방법이 아니다. 위에서 말했던 것 처럼 파드내에 있는 컨테이너는 서로 다른 노드에 배치되는게 아니다 즉 하나의 노드에 두개 컨테이너가 배치되는 것이다. 
  - 만약에 위에서 구성한 방식 백엔드 서버와 데이터베이스를 하나의 파드로 묶는다면 항상 같은 노드에 있을 것이고 만약에 클러스터를 구성했는데 이 클러스터는 두 개의 노드가 있다면 백엔드 서버와 데이터베이스가 있는 파드는 두 개중 하나의 노드가 배치될것이고 하나의 노드에 배치되면 하나의 노드의 자원은 남게되고 자원 낭비를 하는 것이다. 



## 언제? 파드에 두 개 이상 컨테이너를 넣어야하는가? 
- 컨테이너를 함께 실행해야 하는가 아니면 서로 다른 호스트에서 실행할 수 있는가? 
- 여러 컨테이너가 모여 하나의 구성 요소를 나타내는가? 아니면 개별적인 구성 요소인가? 
- 컨테이너가 함께 혹은 개별적으로 스케일링 돼야 하는가? 

하나의 파드에 두 개 컨테이너를 넣어 배포해야 할 때는 위 질문을 생각해봐야 한다.



## 파드 안정적으로 운영하는 법 
- 쿠버네티스에서 파드는 배포 가능한 기본 단위이다. 우리는 실제로 파드를 배포하게 되면 파드를 수동적으로 개입하지 않고 안정적인 상태로 유지되길 원할 것이다. 레플리케이션 컨트롤러, 디플로이먼트와 같은 리소스를 생성해 실제 파드를 생성하고 관리 할 수 있다. 
- 우리가 파드를 배포하게 된다면, 파드는 특정 워커노드에 배치가 되고 해당 노드에서 파드의 컨테이너가 실행 될 수 있게 작업을 진행한다. 만약에 파드에 포함된 컨테이너 중 하나가 죽으면 어떻게 될까? 하나가 아니라 모든 컨테이너가 죽는다면? 파드가 노드에서 스케줄링되는 즉시 해당 노드의 kubelet은 파드의 컨테이너를 실행하고 파드가 존재하는 한 컨테이너가 계속 실행되도록 할 것이다. 
- 컨테이너의 주 프로세스 크래시가 발생하면 kubelete이 다시 시작한다. 그래서 우리는 파드가 문제가 생겨 애플리케이션에서 작업을 안하더라도 쿠버네티스는 애플리케이션을 실행하는 것만으로도 자동으로 치유할 수 있다. 
- 떄떄로 우리의 애플리케이션이 크래시가 없이도 죽는경우가 생긴다. 예를들어 무한루프나 교착 상태에 빠져서 응답하지 못하는 상황이라면 어떻게 해야할까 이럴땐 내부의 기능에 의존하지 않고  외부에서 애플리케이션 상태를 체크해야한다. 


## 정리
- 파드는 일시적이다. 파드가 다른 파드를 위한 공간을 확보하려고 노드에서 제거되거나 누군가의 파드를 줄이거나 클러스터 노드의 장애로 언제든지 다른 노드로 이동할 수 있다.
- 